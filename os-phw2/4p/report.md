# Степанов Алексей Александрович, БПИ 212
## ИДЗ №2

**Вариант 12**

*Задача о гостинице – 1.*

В гостинице 30 номеров, клиенты гостиницы снимают номер на одни или несколько
суток. Если в гостинице нет свободных номеров, клиенты не уходят, а устраиваются
рядом с гостиницей на скамейках и ждут, пока любой номеров не освободится.
Создать приложение, моделирующее работу гостиницы. Каждого клиента реализовать
в виде отдельного процесса.

[**Требования**](requirements.md)

[**Решение**](main.c)

Процессы внутри программы взаимодействуют с использованием семафоров по стандарту UNIX SYSTEM V.
Использование разделяемой памяти для решения данной задачи не понадобилось.

Реализовано завершение работы программы по сигналу SIGINT. Удаление созданных семафоров производится.

Количество процессов посетителей по умолчанию = 10, иное значение вводится в качестве аргумента коммандной строки при запуске программы.

Сценарий работы программы:

Создаётся два набора семафоров: visitors и rooms.

> visitors имеет размер 3:
>
>> 0 - количество посетителей, ожидающих появления свободного номера
>>
>> 1 - количество посетителей, находящихся в отеле и ищущих свободный номер в данный момент
>>
>> 2 - количество посетителей, занимающих один из номеров
>
> rooms имеет размер rooms_cnt, т.е. 30
>
>> i - количество дней, в течение которых iй номер будет занят

Также создаётся семафор check, отвечающий за то, чтобы посетители не проверяли комнаты одновременно и, соответственно, не могли заселиться в одну и ту же комнату.

Создаётся n дочерних процессов - посетителей, родительский процесс - отель.

Отель контролирует время, на которые заняты номера; проверяет, что всё ещё остаются необслуженные посетители / отдыхающие в отеле посетители. 
Также процесс-отель контролирует работу процессов-посетителей: он открывается, ждёт пока все посетители попробуют найти свободный номер, закрывается, производит ревизию номеров, открывается ...

Посетитель ждёт пока отель не откроется, затем проверяет в случайном порядке номера: если находит свободный, то занимает его на некоторое количество дней, после чего покидает отель; иначе выходит из отеля и снова ждёт его открытия.