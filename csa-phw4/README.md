# **Степанов Алексей Александрович, БПИ212**

## **Вариант 27**

### **Задача о Винни-Пухе - 3 или мстительные пчелы.**

Неправильные пчелы, подсчитав в конце месяца убытки от наличия в лесу Винни-Пуха, решили разыскать его и наказать в назидание всем другим любителям сладкого. Для поисков медведя они поделили лес на участки, каждый из которых прочесывает одна стая неправильных пчел. В случае нахождения медведя на своем участке стая проводит показательное наказание и возвращается в улей. Если участок прочесан, а Винни-Пух на нем не обнаружен, стая также возвращается в улей. Там она получает информацию об еще неисследованных участках и снова улетает. ***Требуется создать многопоточное приложение, моделирующее действия пчел. При решении использовать парадигму портфеля задач***

### 4 балла

Приложенный файл [***main.cpp***](./main.cpp) включает в себя решение данной задачи на языке C++.

Программа запускается с помощью терминала; входные данные передаются либо в качестве аргументов командной строки, либо - если таковые отсутствуют - через консоль. Формат входных данных: *"x y n"*, где \[x, y] - координаты на которых находится Винни Пух, n - количество пчёл *(x, y, n - целые числа; x, y ∈ [0, 10); n > 0)*.

В программе используется модель *"Взаимодействующие равные"*, подход - *портфель задач*. 
Что этот подход представляет из себя:
> Вычислительная задача делится на конечное число подзадач, являющихся независимыми единицами работы. Как правило, каждая подзадача должна выполнить однотипные действия над некими данными. Подзадачи нумеруются, а над множеством номеров определяется функция, однозначно отражающая номер задачи на соответствующий ему набор данных.

> Создается переменная для хранения номера задачи, которую следует выполнять следующей (собственно, данная переменная и называется портфелем задач). 

> Каждый поток независимо выполняет следующую цепочку действий: **I.** обращается к портфелю задач для выяснения текущего номера задачи и увеличивает портфель задач на единицу; **II.** выполняет задачу, используя соответствующие данные; **III.** обращается к портфелю задач для получения следующего номера задачи *(т.е. переходит к пункту **I**)*.

> Естественно должен быть предусмотрен механизм остановки процессов при исчерпывании всего множества задач
>> [Источник информации](https://studfile.net/preview/16404441/page:6/)

Приложенный файл [***results.txt***](./results.txt) включает в себя результаты работы программы на некоторых входных данных с пояснениями.

### 5 баллов

[Код программы](./main.cpp) включает в себя комментарии, поясняющие его соответствие данному подходу многопоточного программирования.

Cценарий одновременного поведения представленных в условии задания сущностей:
> Пчёлам необходимо найти Винни Пуха в лесу, состоящем из 100 участков *(данную цифру я взял просто для удобства, лес квадратный - 10x10 участков)*. Т.е. пчёлам придётся проверить от 1 до 100 наборов координат. Каждый участок кодируется номером = (x * 10 + y). Соответственно, координаты можно получить из номера участка так: x = номер div 10, y = номер mod 10.

> В улье хранится порядковый номер следующей непроверенной области леса.

> Каждая пчела независимо выполняет следующую цепочку действий: **I.** узнаёт в улье номер следующей области, увеличивая при этом хранящееся в улье значение на 1; **II.** проверяет полученный номер на корректность (в лесу всего 100 участков, т.е. номер должен быть меньше 100), а также не найден ли уже Винни Пух - если номер некорректен, то пчела прекращает работу, иначе проверяет координаты, соответствующие своему текущему номеру - если там находится Винни Пух, то пчела наказывает его и сообщает об этом другим пчёлам, находящимся сейчас в улье ; **III.** пчела возвращается в улей *(т.е. переходит к пункту **I**)*.

> Изначально все пчёлы находятся в улье; когда Винни Пух оказывается найден и публично наказан, пчёлы, находящиеся в этот момент в улье и прибывающие в улей после этого, прекращают работу.
 
### 6 баллов

Сценарий выше <u>построчно</u> соответствует указанному ещё выше описанию подхода *портфель задач*. Программа также чётко ему соответствует, что пояснено добавленными в неё комментариями. Соответственно то, как на программу отображается каждый из субъектов предметной области, очевидно.
> Но если всё же уточнять, то: номер, хранящийся в улье = портфель задач ; пчела = поток ; лес = двумерный массив bool forest\[10]\[10], где значение ячейки массива обозначает находится ли на данном участке Винни Пух ; задача = проверить координаты \[x = номер div 10, y = номер mod 10] на наличие Винни Пуха *(т.е. узнать значение forest\[x]\[y])*

Ввод данных из командной строки присутствовал в программе изначально.

## Предполагаемая мною оценка: 6.


